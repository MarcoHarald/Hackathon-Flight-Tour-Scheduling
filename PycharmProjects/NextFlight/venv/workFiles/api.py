import json
#import requests
import urllib3

#-------- DEALING WITH JSON DATA --------------

PlacePrices ='{"Id":"TH","Name":"Thailand","DirectPrice":696,"IndirectPrice":378}'

#trial with data
python_obj = json.loads(PlacePrices)
print (python_obj["Name"])
print ("indirectPrice:  ", python_obj["IndirectPrice"])
print ("directPrice:    ", python_obj["DirectPrice"])


fullData = '{"PlacePrices":[{"Id":"TH","Name":"Thailand","DirectPrice":696,"IndirectPrice":378},{"Id":"SG","Name":"Singapore","DirectPrice":544,"IndirectPrice":305},{"Id":"TW","Name":"Taiwan","IndirectPrice":400},{"Id":"VN","Name":"Vietnam","DirectPrice":657,"IndirectPrice":406},{"Id":"KE","Name":"Kenya","DirectPrice":1097,"IndirectPrice":376},{"Id":"PH","Name":"Philippines","DirectPrice":1010,"IndirectPrice":484},{"Id":"TR","Name":"Turkey","DirectPrice":122},{"Id":"SA","Name":"Saudi Arabia","DirectPrice":895},{"Id":"BH","Name":"Bahrain","DirectPrice":525,"IndirectPrice":212},{"Id":"JO","Name":"Jordan","DirectPrice":397},{"Id":"ID","Name":"Indonesia","DirectPrice":544,"IndirectPrice":356},{"Id":"MY","Name":"Malaysia","DirectPrice":629,"IndirectPrice":326},{"Id":"HK","Name":"Hong Kong","DirectPrice":903,"IndirectPrice":345},{"Id":"QA","Name":"Qatar","DirectPrice":685,"IndirectPrice":240},{"Id":"CV","Name":"Cape Verde","DirectPrice":0,"IndirectPrice":209},{"Id":"LR","Name":"Liberia","IndirectPrice":0},{"Id":"RW","Name":"Rwanda","IndirectPrice":538},{"Id":"SL","Name":"Sierra Leone","IndirectPrice":812},{"Id":"AO","Name":"Angola","IndirectPrice":362},{"Id":"GW","Name":"Guinea-Bissau","IndirectPrice":550},{"Id":"EG","Name":"Egypt","DirectPrice":112},{"Id":"CI","Name":"Ivory Coast","IndirectPrice":316},{"Id":"GQ","Name":"Equatorial Guinea","IndirectPrice":0},{"Id":"ET","Name":"Ethiopia","DirectPrice":498,"IndirectPrice":391},{"Id":"GH","Name":"Ghana","DirectPrice":1788,"IndirectPrice":483},{"Id":"KW","Name":"Kuwait","DirectPrice":1184,"IndirectPrice":193},{"Id":"IL","Name":"Israel","DirectPrice":0,"IndirectPrice":98},{"Id":"OM","Name":"Oman","DirectPrice":734},{"Id":"PE","Name":"Peru","IndirectPrice":523},{"Id":"CO","Name":"Colombia","DirectPrice":1084,"IndirectPrice":450},{"Id":"AR","Name":"Argentina","DirectPrice":0,"IndirectPrice":450},{"Id":"IS","Name":"Iceland","DirectPrice":81},{"Id":"EC","Name":"Ecuador","IndirectPrice":580},{"Id":"CL","Name":"Chile","DirectPrice":2251,"IndirectPrice":437},{"Id":"BR","Name":"Brazil","DirectPrice":992,"IndirectPrice":374},{"Id":"BM","Name":"Bermuda","DirectPrice":0},{"Id":"CA","Name":"Canada","DirectPrice":392,"IndirectPrice":182},{"Id":"MX","Name":"Mexico","DirectPrice":976,"IndirectPrice":312},{"Id":"IR","Name":"Iran","DirectPrice":0},{"Id":"AE","Name":"United Arab Emirates","DirectPrice":511,"IndirectPrice":144},{"Id":"LB","Name":"Lebanon","DirectPrice":0,"IndirectPrice":156},{"Id":"US","Name":"United States","DirectPrice":196,"IndirectPrice":185},{"Id":"MU","Name":"Mauritius","DirectPrice":1260,"IndirectPrice":377},{"Id":"MZ","Name":"Mozambique","IndirectPrice":0},{"Id":"HT","Name":"Haiti","IndirectPrice":0},{"Id":"SX","Name":"St Maarten","IndirectPrice":434},{"Id":"BQ","Name":"Caribbean Netherlands","IndirectPrice":0},{"Id":"AW","Name":"Aruba","IndirectPrice":0},{"Id":"CW","Name":"Curacao","IndirectPrice":468},{"Id":"CU","Name":"Cuba","DirectPrice":1227,"IndirectPrice":419},{"Id":"CN","Name":"China","DirectPrice":625,"IndirectPrice":303},{"Id":"TM","Name":"Turkmenistan","IndirectPrice":0},{"Id":"IN","Name":"India","DirectPrice":546,"IndirectPrice":309},{"Id":"KR","Name":"South Korea","DirectPrice":1223,"IndirectPrice":360},{"Id":"KZ","Name":"Kazakhstan","DirectPrice":489,"IndirectPrice":229},{"Id":"AZ","Name":"Azerbaijan","DirectPrice":349,"IndirectPrice":176},{"Id":"JP","Name":"Japan","DirectPrice":1109},{"Id":"CR","Name":"Costa Rica","DirectPrice":1359,"IndirectPrice":527},{"Id":"PA","Name":"Panama","IndirectPrice":347},{"Id":"LK","Name":"Sri Lanka","DirectPrice":555,"IndirectPrice":428},{"Id":"RU","Name":"Russia","DirectPrice":119,"IndirectPrice":106},{"Id":"PL","Name":"Poland","DirectPrice":42},{"Id":"TN","Name":"Tunisia","DirectPrice":178,"IndirectPrice":119},{"Id":"FI","Name":"Finland","DirectPrice":126,"IndirectPrice":60},{"Id":"AT","Name":"Austria","DirectPrice":52,"IndirectPrice":40},{"Id":"ES","Name":"Spain","DirectPrice":11},{"Id":"LU","Name":"Luxembourg","DirectPrice":49},{"Id":"PT","Name":"Portugal","DirectPrice":35},{"Id":"EE","Name":"Estonia","DirectPrice":147,"IndirectPrice":118},{"Id":"RO","Name":"Romania","DirectPrice":61},{"Id":"SE","Name":"Sweden","DirectPrice":41},{"Id":"DK","Name":"Denmark","DirectPrice":11},{"Id":"TZ","Name":"Tanzania","IndirectPrice":389},{"Id":"NA","Name":"Namibia","IndirectPrice":429},{"Id":"NG","Name":"Nigeria","DirectPrice":1068},{"Id":"SN","Name":"Senegal","IndirectPrice":413},{"Id":"ZA","Name":"South Africa","DirectPrice":1041,"IndirectPrice":384},{"Id":"MA","Name":"Morocco","DirectPrice":92},{"Id":"UG","Name":"Uganda","IndirectPrice":384},{"Id":"RS","Name":"Serbia","DirectPrice":136},{"Id":"IT","Name":"Italy","DirectPrice":55},{"Id":"KO","Name":"Kosovo","DirectPrice":0,"IndirectPrice":154},{"Id":"HU","Name":"Hungary","DirectPrice":61},{"Id":"MD","Name":"Moldova","DirectPrice":124,"IndirectPrice":120},{"Id":"HR","Name":"Croatia","DirectPrice":347},{"Id":"MT","Name":"Malta","DirectPrice":57},{"Id":"GR","Name":"Greece","DirectPrice":0,"IndirectPrice":108},{"Id":"IE","Name":"Ireland","DirectPrice":11},{"Id":"NL","Name":"Netherlands","DirectPrice":33},{"Id":"NO","Name":"Norway","DirectPrice":23},{"Id":"LV","Name":"Latvia","DirectPrice":76,"IndirectPrice":58},{"Id":"BE","Name":"Belgium","DirectPrice":82,"IndirectPrice":69},{"Id":"BG","Name":"Bulgaria","DirectPrice":0},{"Id":"CH","Name":"Switzerland","DirectPrice":42},{"Id":"UA","Name":"Ukraine","DirectPrice":0},{"Id":"FR","Name":"France","DirectPrice":11},{"Id":"LT","Name":"Lithuania","DirectPrice":0,"IndirectPrice":84},{"Id":"UK","Name":"United Kingdom","DirectPrice":11},{"Id":"BY","Name":"Belarus","IndirectPrice":146},{"Id":"SI","Name":"Slovenia","DirectPrice":0},{"Id":"CZ","Name":"Czech Republic","DirectPrice":43},{"Id":"DE","Name":"Germany","DirectPrice":49},{"Id":"GG","Name":"Guernsey","DirectPrice":145,"IndirectPrice":128},{"Id":"MN","Name":"Mongolia","IndirectPrice":423},{"Id":"BJ","Name":"Benin","IndirectPrice":0},{"Id":"BI","Name":"Burundi","IndirectPrice":0},{"Id":"BF","Name":"Burkina Faso","IndirectPrice":347},{"Id":"ZM","Name":"Zambia","IndirectPrice":520},{"Id":"KH","Name":"Cambodia","IndirectPrice":379},{"Id":"MM","Name":"Myanmar","IndirectPrice":452},{"Id":"CD","Name":"DR Congo","IndirectPrice":399},{"Id":"CM","Name":"Cameroon","IndirectPrice":425},{"Id":"ZW","Name":"Zimbabwe","IndirectPrice":612},{"Id":"ML","Name":"Mali","IndirectPrice":0},{"Id":"SO","Name":"Somalia","IndirectPrice":528},{"Id":"MR","Name":"Mauritania","IndirectPrice":259},{"Id":"DJ","Name":"Djibouti","IndirectPrice":475},{"Id":"CG","Name":"Congo","IndirectPrice":0},{"Id":"GA","Name":"Gabon","IndirectPrice":0},{"Id":"ER","Name":"Eritrea","IndirectPrice":486},{"Id":"GM","Name":"Gambia","DirectPrice":477},{"Id":"GN","Name":"Guinea","IndirectPrice":1500},{"Id":"DZ","Name":"Algeria","DirectPrice":138,"IndirectPrice":88},{"Id":"NZ","Name":"New Zealand","IndirectPrice":628},{"Id":"BO","Name":"Bolivia","IndirectPrice":636},{"Id":"UY","Name":"Uruguay","IndirectPrice":655},{"Id":"CY","Name":"Cyprus","DirectPrice":0,"IndirectPrice":111},{"Id":"IQ","Name":"Iraq","IndirectPrice":0},{"Id":"AU","Name":"Australia","DirectPrice":965,"IndirectPrice":396},{"Id":"AG","Name":"Antigua and Barbuda","DirectPrice":1191,"IndirectPrice":549},{"Id":"GT","Name":"Guatemala","IndirectPrice":636},{"Id":"DO","Name":"Dominican Republic","DirectPrice":1214,"IndirectPrice":398},{"Id":"LC","Name":"Saint Lucia","DirectPrice":0},{"Id":"MK","Name":"Republic of Macedonia","DirectPrice":65},{"Id":"BS","Name":"Bahamas","DirectPrice":1766,"IndirectPrice":339},{"Id":"TT","Name":"Trinidad and Tobago","IndirectPrice":425},{"Id":"KY","Name":"Cayman Islands","IndirectPrice":0},{"Id":"BB","Name":"Barbados","DirectPrice":1165,"IndirectPrice":374},{"Id":"TC","Name":"Turks and Caicos Islands","IndirectPrice":0},{"Id":"GP","Name":"Guadeloupe","IndirectPrice":929},{"Id":"KG","Name":"Kyrgyzstan","IndirectPrice":223},{"Id":"TJ","Name":"Tajikistan","IndirectPrice":0},{"Id":"MV","Name":"Maldives","IndirectPrice":0},{"Id":"UZ","Name":"Uzbekistan","IndirectPrice":235},{"Id":"BD","Name":"Bangladesh","DirectPrice":615,"IndirectPrice":96},{"Id":"NP","Name":"Nepal","IndirectPrice":350},{"Id":"JM","Name":"Jamaica","DirectPrice":0},{"Id":"SV","Name":"El Salvador","IndirectPrice":0},{"Id":"GI","Name":"Gibraltar","DirectPrice":81},{"Id":"MQ","Name":"Martinique","IndirectPrice":316},{"Id":"GE","Name":"Georgia","DirectPrice":33},{"Id":"AM","Name":"Armenia","IndirectPrice":189},{"Id":"PK","Name":"Pakistan","DirectPrice":876},{"Id":"AF","Name":"Afghanistan","IndirectPrice":374},{"Id":"AL","Name":"Albania","DirectPrice":219,"IndirectPrice":132},{"Id":"NE","Name":"Niger","IndirectPrice":0},{"Id":"SD","Name":"Sudan","IndirectPrice":0},{"Id":"SC","Name":"Seychelles","IndirectPrice":462},{"Id":"TD","Name":"Chad","IndirectPrice":0},{"Id":"TG","Name":"Togo","IndirectPrice":581},{"Id":"BA","Name":"Bosnia and Herzegovina","IndirectPrice":104},{"Id":"SK","Name":"Slovakia","DirectPrice":0},{"Id":"SS","Name":"South Sudan","IndirectPrice":0},{"Id":"CF","Name":"Central African Republic","IndirectPrice":0},{"Id":"KM","Name":"Comoros","IndirectPrice":0},{"Id":"MO","Name":"Macau","IndirectPrice":540},{"Id":"LA","Name":"Laos","IndirectPrice":0},{"Id":"BN","Name":"Brunei","DirectPrice":0,"IndirectPrice":883},{"Id":"BW","Name":"Botswana","IndirectPrice":567},{"Id":"SZ","Name":"Swaziland","IndirectPrice":0},{"Id":"ST","Name":"Sao Tome and Principe","IndirectPrice":0},{"Id":"LS","Name":"Lesotho","IndirectPrice":0},{"Id":"PY","Name":"Paraguay","IndirectPrice":0},{"Id":"GF","Name":"French Guiana","IndirectPrice":0},{"Id":"PF","Name":"French Polynesia","IndirectPrice":578},{"Id":"CK","Name":"Cook Islands","IndirectPrice":0},{"Id":"NC","Name":"New Caledonia","IndirectPrice":755},{"Id":"GU","Name":"Guam","IndirectPrice":1503},{"Id":"NU","Name":"Niue","IndirectPrice":0},{"Id":"GY","Name":"Guyana","IndirectPrice":554},{"Id":"VE","Name":"Venezuela","IndirectPrice":461},{"Id":"SR","Name":"Suriname","IndirectPrice":0},{"Id":"FJ","Name":"Fiji","IndirectPrice":926},{"Id":"WS","Name":"Samoa","IndirectPrice":0},{"Id":"TO","Name":"Tonga","IndirectPrice":0},{"Id":"VU","Name":"Vanuatu","IndirectPrice":0},{"Id":"MW","Name":"Malawi","IndirectPrice":0},{"Id":"GD","Name":"Grenada","IndirectPrice":511},{"Id":"PR","Name":"Puerto Rico","IndirectPrice":0},{"Id":"HN","Name":"Honduras","IndirectPrice":534},{"Id":"VI","Name":"US Virgin Islands","IndirectPrice":383},{"Id":"NI","Name":"Nicaragua","IndirectPrice":0},{"Id":"ME","Name":"Montenegro","DirectPrice":236},{"Id":"KN","Name":"Saint Kitts and Nevis","IndirectPrice":0},{"Id":"BZ","Name":"Belize","IndirectPrice":562},{"Id":"KP","Name":"North Korea","IndirectPrice":0},{"Id":"MG","Name":"Madagascar","IndirectPrice":501},{"Id":"YT","Name":"Mayotte","IndirectPrice":0},{"Id":"RE","Name":"Reunion","IndirectPrice":0},{"Id":"FO","Name":"Faroe Islands","IndirectPrice":0},{"Id":"CE","Name":"Crimea","IndirectPrice":0},{"Id":"LY","Name":"Libya","IndirectPrice":652},{"Id":"FK","Name":"Falkland Islands","IndirectPrice":1483},{"Id":"GL","Name":"Greenland","IndirectPrice":746}],"Metadata":{"MachineName":"IP-0A356C39","Revision":"1.0.3150.0","PriceSourceId":"taps-taps","ExperimentAssignments":[],"Properties":[{"Name":"Browse Service All Results","Value":204},{"Name":"Browse Service Average Quote Age","Value":103848},{"Name":"Browse Service Node","Value":"IP-0A356C39"},{"Name":"Browse Service Priced Results","Value":163},{"Name":"Browse Service Search Duration","Value":468.2757},{"Name":"Browse Service Version","Value":"1.0.3150.0"},{"Name":"Browse Service Zone","Value":"Unknown"}]}}'

#-------- API REQUEST CONSTRUCTION --------------

apiKey = '8aa374f4e28e4664bf268f850f767535'

dateDep = '2018-12-13/'
dateArr = '2018-12-20/'
locDep = 'LOND/'
locArr = 'anywhere/'


linkString = "https://www.skyscanner.net/g/browseservice/dataservices/browse/v3/bvweb/UK/GBP/en-GB/"
linkString = "".join([linkString,"destinations/",locDep,locArr])
linkString = "".join([linkString,dateDep,"?profile=minimalcityrollupwithnamesv2&include=image&apikey=",apiKey])

print (linkString)
#print ("https://www.skyscanner.net/g/browseservice/dataservices/browse/v3/bvweb/UK/GBP/en-GB/destinations/LOND/anywhere/2018-12-13/?profile=minimalcityrollupwithnamesv2&include=image&apikey=8aa374f4e28e4664bf268f850f767535")

print ('finished')


#-------- API REQUEST CONSTRUCTION --------------

#data = requests.get(linkString, allow_redirects=True)
#open('data.txt', 'wb').write(data.content)

#print (data)

#import requests
#r = requests.get(linkString)
#print (r)